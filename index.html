<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Free online tool for image compression, conversion, PDF editing and conversion. Optimize your media files with our powerful web app.">
    <meta name="keywords" content="image compressor, image converter, PDF editor, PDF converter, optimize images, reduce file size">
    <title>MediaTool Pro | Image & PDF Conversion Toolkit</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <style>
        :root {
            --primary-color: #4285f4;
            --secondary-color: #34a853;
            --accent-color: #ea4335;
            --light-color: #f8f9fa;
            --dark-color: #202124;
            --gray-color: #5f6368;
            --border-radius: 8px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--light-color);
            color: var(--dark-color);
            line-height: 1.6;
        }

        header {
            background-color: white;
            box-shadow: var(--box-shadow);
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 1rem 2rem;
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
            display: flex;
            align-items: center;
        }

        .logo i {
            margin-right: 10px;
        }

        .nav-links {
            display: flex;
            gap: 1.5rem;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--gray-color);
            font-weight: 500;
            transition: var(--transition);
        }

        .nav-links a:hover {
            color: var(--primary-color);
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .hero {
            text-align: center;
            margin-bottom: 3rem;
            padding: 2rem;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--dark-color);
        }

        .hero p {
            color: var(--gray-color);
            max-width: 800px;
            margin: 0 auto 2rem;
        }

        .ad-banner {
            background-color: #f1f3f4;
            padding: 1rem;
            text-align: center;
            margin: 2rem 0;
            border-radius: var(--border-radius);
            min-height: 90px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .tool-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .tool-card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 1.5rem;
            transition: var(--transition);
            cursor: pointer;
        }

        .tool-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .tool-card i {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .tool-card h3 {
            margin-bottom: 1rem;
            color: var(--dark-color);
        }

        .tool-card p {
            color: var(--gray-color);
            margin-bottom: 1.5rem;
        }

        .btn {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: var(--border-radius);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            cursor: pointer;
        }

        .btn:hover {
            background-color: #3367d6;
            transform: translateY(-2px);
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
        }

        .btn-outline:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }

        .btn-disabled:hover {
            transform: none;
            background-color: #cccccc;
        }

        .tool-section {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 2rem;
            margin-bottom: 3rem;
            display: none;
        }

        .tool-section.active {
            display: block;
        }

        .tool-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #eee;
        }

        .tool-header h2 {
            color: var(--dark-color);
        }

        .back-btn {
            color: var(--gray-color);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .back-btn:hover {
            color: var(--primary-color);
        }

        .upload-area {
            border: 2px dashed #ccc;
            border-radius: var(--border-radius);
            padding: 3rem 1rem;
            text-align: center;
            margin-bottom: 2rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .upload-area:hover {
            border-color: var(--primary-color);
            background-color: #f8faff;
        }

        .upload-area i {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .upload-area p {
            color: var(--gray-color);
            margin-bottom: 1rem;
        }

        .settings-panel {
            margin-bottom: 2rem;
        }

        .settings-panel h3 {
            margin-bottom: 1rem;
            color: var(--dark-color);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--dark-color);
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 1rem;
        }

        .range-slider {
            width: 100%;
            margin: 1rem 0;
        }

        .preview-container {
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .preview-box {
            flex: 1;
            min-width: 250px;
        }

        .preview-box h4 {
            margin-bottom: 1rem;
            color: var(--dark-color);
        }

        .preview-img {
            max-width: 100%;
            height: auto;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            max-height: 300px;
            object-fit: contain;
        }

        .file-info {
            background-color: #f8f9fa;
            padding: 1rem;
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
        }

        .file-info p {
            margin-bottom: 0.5rem;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .progress-container {
            width: 100%;
            background-color: #f1f1f1;
            border-radius: var(--border-radius);
            margin: 1rem 0;
            display: none;
        }

        .progress-bar {
            height: 10px;
            background-color: var(--primary-color);
            border-radius: var(--border-radius);
            width: 0%;
            transition: width 0.3s ease;
        }

        .status-message {
            margin: 1rem 0;
            padding: 0.5rem;
            border-radius: var(--border-radius);
            display: none;
        }

        .status-success {
            background-color: #d4edda;
            color: #155724;
        }

        .status-error {
            background-color: #f8d7da;
            color: #721c24;
        }

        footer {
            background-color: var(--dark-color);
            color: white;
            padding: 3rem 2rem;
            text-align: center;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            text-align: left;
        }

        .footer-column h3 {
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column ul li {
            margin-bottom: 0.8rem;
        }

        .footer-column ul li a {
            color: #bdc1c6;
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-column ul li a:hover {
            color: white;
        }

        .copyright {
            margin-top: 3rem;
            padding-top: 1.5rem;
            border-top: 1px solid #3c4043;
            color: #9aa0a6;
        }

        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                gap: 1rem;
            }

            .nav-links {
                width: 100%;
                justify-content: center;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .preview-container {
                flex-direction: column;
            }

            .action-buttons {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                text-align: center;
            }
        }

        @media (max-width: 480px) {
            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }

            .hero {
                padding: 1rem;
            }

            .tool-section {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="navbar">
            <a href="#" class="logo">
                <i class="fas fa-tools"></i>
                <span>MediaTool Pro</span>
            </a>
            <div class="nav-links">
                <a href="#" class="nav-link">Home</a>
                <a href="#features" class="nav-link">Features</a>
                <a href="#how-it-works" class="nav-link">How It Works</a>
                <a href="#faq" class="nav-link">FAQ</a>
                <a href="#contact" class="nav-link">Contact</a>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="hero">
            <h1>All-in-One Media Conversion Toolkit</h1>
            <p>Compress, convert, and edit images and PDFs with our powerful online tools. Optimize your files for web and mobile with just a few clicks.</p>
            <div class="ad-banner">
                <!-- Ad placeholder -->
                Advertisement Space
            </div>
        </div>

        <div class="tool-container">
            <div class="tool-card" onclick="showTool('image-compressor')">
                <i class="fas fa-compress-alt"></i>
                <h3>Image Compressor</h3>
                <p>Reduce image file size without losing quality. Perfect for web optimization.</p>
                <button class="btn">Compress Now</button>
            </div>
            <div class="tool-card" onclick="showTool('image-converter')">
                <i class="fas fa-exchange-alt"></i>
                <h3>Image Converter</h3>
                <p>Convert between JPG, PNG, WEBP, GIF and more image formats.</p>
                <button class="btn">Convert Now</button>
            </div>
            <div class="tool-card" onclick="showTool('pdf-converter')">
                <i class="fas fa-file-pdf"></i>
                <h3>PDF Converter</h3>
                <p>Convert PDF to Word, Excel, JPG or convert files to PDF.</p>
                <button class="btn">Convert Now</button>
            </div>
            <div class="tool-card" onclick="showTool('pdf-editor')">
                <i class="fas fa-edit"></i>
                <h3>PDF Editor</h3>
                <p>Edit, merge, split, rotate and compress PDF documents online.</p>
                <button class="btn">Edit Now</button>
            </div>
        </div>

        <div class="ad-banner">
            <!-- Ad placeholder -->
            Advertisement Space
        </div>

        <!-- Image Compressor Tool -->
        <div id="image-compressor" class="tool-section">
            <div class="tool-header">
                <h2><i class="fas fa-compress-alt"></i> Image Compressor</h2>
                <a href="#" class="back-btn" onclick="hideTool('image-compressor')"><i class="fas fa-arrow-left"></i> Back to Tools</a>
            </div>
            
            <div class="upload-area" id="compressor-dropzone" ondragover="handleDragOver(event)" ondrop="handleDrop(event, 'compressor')" ondragleave="handleDragLeave(event)">
                <i class="fas fa-cloud-upload-alt"></i>
                <h3>Drag & Drop Your Image Here</h3>
                <p>or</p>
                <input type="file" id="compressor-input" accept="image/*" style="display: none;" onchange="handleFileSelect(this.files, 'compressor')">
                <button class="btn" onclick="document.getElementById('compressor-input').click()">Select Image</button>
            </div>
            
            <div class="settings-panel" id="compressor-settings" style="display: none;">
                <h3>Compression Settings</h3>
                
                <div class="form-group">
                    <label for="compression-level">Compression Level: <span id="compression-value">70</span>%</label>
                    <input type="range" id="compression-level" class="range-slider" min="0" max="100" value="70" oninput="updateCompressionValue()">
                </div>
                
                <div class="form-group">
                    <label for="output-format">Output Format:</label>
                    <select id="output-format" class="form-control">
                        <option value="original">Keep Original Format</option>
                        <option value="jpeg">JPEG</option>
                        <option value="png">PNG</option>
                        <option value="webp">WEBP</option>
                    </select>
                </div>
                
                <div class="progress-container" id="compressor-progress">
                    <div class="progress-bar" id="compressor-progress-bar"></div>
                </div>
                
                <div class="status-message" id="compressor-status"></div>
                
                <div class="preview-container">
                    <div class="preview-box">
                        <h4>Original Image</h4>
                        <img id="original-preview" class="preview-img" src="" alt="Original Image">
                        <div class="file-info" id="original-info"></div>
                    </div>
                    <div class="preview-box">
                        <h4>Compressed Image</h4>
                        <img id="compressed-preview" class="preview-img" src="" alt="Compressed Image">
                        <div class="file-info" id="compressed-info"></div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn" id="compress-btn" onclick="compressImage()"><i class="fas fa-compress-alt"></i> Compress Image</button>
                    <button class="btn btn-outline" id="download-compressed-btn" onclick="downloadCompressedImage()" disabled><i class="fas fa-download"></i> Download</button>
                </div>
            </div>
        </div>

        <!-- Image Converter Tool -->
        <div id="image-converter" class="tool-section">
            <div class="tool-header">
                <h2><i class="fas fa-exchange-alt"></i> Image Converter</h2>
                <a href="#" class="back-btn" onclick="hideTool('image-converter')"><i class="fas fa-arrow-left"></i> Back to Tools</a>
            </div>
            
            <div class="upload-area" id="converter-dropzone" ondragover="handleDragOver(event)" ondrop="handleDrop(event, 'converter')" ondragleave="handleDragLeave(event)">
                <i class="fas fa-cloud-upload-alt"></i>
                <h3>Drag & Drop Your Image Here</h3>
                <p>or</p>
                <input type="file" id="converter-input" accept="image/*" style="display: none;" onchange="handleFileSelect(this.files, 'converter')">
                <button class="btn" onclick="document.getElementById('converter-input').click()">Select Image</button>
            </div>
            
            <div class="settings-panel" id="converter-settings" style="display: none;">
                <h3>Conversion Settings</h3>
                
                <div class="form-group">
                    <label for="target-format">Convert To:</label>
                    <select id="target-format" class="form-control">
                        <option value="jpeg">JPEG</option>
                        <option value="png">PNG</option>
                        <option value="webp">WEBP</option>
                        <option value="gif">GIF</option>
                        <option value="bmp">BMP</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="quality-level">Quality: <span id="quality-value">80</span>%</label>
                    <input type="range" id="quality-level" class="range-slider" min="0" max="100" value="80" oninput="updateQualityValue()">
                </div>
                
                <div class="progress-container" id="converter-progress">
                    <div class="progress-bar" id="converter-progress-bar"></div>
                </div>
                
                <div class="status-message" id="converter-status"></div>
                
                <div class="preview-container">
                    <div class="preview-box">
                        <h4>Original Image</h4>
                        <img id="original-converter-preview" class="preview-img" src="" alt="Original Image">
                        <div class="file-info" id="original-converter-info"></div>
                    </div>
                    <div class="preview-box">
                        <h4>Converted Image</h4>
                        <img id="converted-preview" class="preview-img" src="" alt="Converted Image">
                        <div class="file-info" id="converted-info"></div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn" id="convert-btn" onclick="convertImage()"><i class="fas fa-exchange-alt"></i> Convert Image</button>
                    <button class="btn btn-outline" id="download-converted-btn" onclick="downloadConvertedImage()" disabled><i class="fas fa-download"></i> Download</button>
                </div>
            </div>
        </div>

        <!-- PDF Converter Tool -->
        <div id="pdf-converter" class="tool-section">
            <div class="tool-header">
                <h2><i class="fas fa-file-pdf"></i> PDF Converter</h2>
                <a href="#" class="back-btn" onclick="hideTool('pdf-converter')"><i class="fas fa-arrow-left"></i> Back to Tools</a>
            </div>
            
            <div class="upload-area" id="pdf-converter-dropzone" ondragover="handleDragOver(event)" ondrop="handleDrop(event, 'pdf-converter')" ondragleave="handleDragLeave(event)">
                <i class="fas fa-cloud-upload-alt"></i>
                <h3>Drag & Drop Your File Here</h3>
                <p>or</p>
                <input type="file" id="pdf-converter-input" accept=".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png" style="display: none;" onchange="handleFileSelect(this.files, 'pdf-converter')">
                <button class="btn" onclick="document.getElementById('pdf-converter-input').click()">Select File</button>
            </div>
            
            <div class="settings-panel" id="pdf-converter-settings" style="display: none;">
                <h3>Conversion Settings</h3>
                
                <div class="form-group">
                    <label for="pdf-conversion-type">Conversion Type:</label>
                    <select id="pdf-conversion-type" class="form-control">
                        <option value="pdf-to-word">PDF to Word (DOCX)</option>
                        <option value="pdf-to-excel">PDF to Excel (XLSX)</option>
                        <option value="pdf-to-jpg">PDF to JPG</option>
                        <option value="word-to-pdf">Word to PDF</option>
                        <option value="excel-to-pdf">Excel to PDF</option>
                        <option value="image-to-pdf">Image to PDF</option>
                    </select>
                </div>
                
                <div class="progress-container" id="pdf-converter-progress">
                    <div class="progress-bar" id="pdf-converter-progress-bar"></div>
                </div>
                
                <div class="status-message" id="pdf-converter-status"></div>
                
                <div class="file-info" id="pdf-converter-info"></div>
                
                <div class="action-buttons">
                    <button class="btn" id="convert-pdf-btn" onclick="convertPDF()"><i class="fas fa-exchange-alt"></i> Convert File</button>
                    <button class="btn btn-outline" id="download-converted-pdf-btn" onclick="downloadConvertedPDF()" disabled><i class="fas fa-download"></i> Download</button>
                </div>
            </div>
        </div>

        <!-- PDF Editor Tool -->
        <div id="pdf-editor" class="tool-section">
            <div class="tool-header">
                <h2><i class="fas fa-edit"></i> PDF Editor</h2>
                <a href="#" class="back-btn" onclick="hideTool('pdf-editor')"><i class="fas fa-arrow-left"></i> Back to Tools</a>
            </div>
            
            <div class="upload-area" id="pdf-editor-dropzone" ondragover="handleDragOver(event)" ondrop="handleDrop(event, 'pdf-editor')" ondragleave="handleDragLeave(event)">
                <i class="fas fa-cloud-upload-alt"></i>
                <h3>Drag & Drop Your PDF Here</h3>
                <p>or</p>
                <input type="file" id="pdf-editor-input" accept=".pdf" style="display: none;" onchange="handleFileSelect(this.files, 'pdf-editor')">
                <button class="btn" onclick="document.getElementById('pdf-editor-input').click()">Select PDF</button>
            </div>
            
            <div class="settings-panel" id="pdf-editor-settings" style="display: none;">
                <h3>Editor Tools</h3>
                
                <div class="form-group">
                    <label for="editor-action">Select Action:</label>
                    <select id="editor-action" class="form-control" onchange="showEditorOptions()">
                        <option value="compress">Compress PDF</option>
                        <option value="merge">Merge PDFs</option>
                        <option value="split">Split PDF</option>
                        <option value="rotate">Rotate Pages</option>
                        <option value="protect">Protect with Password</option>
                        <option value="unlock">Remove Password</option>
                    </select>
                </div>
                
                <div id="merge-options" style="display: none;">
                    <div class="form-group">
                        <label>Additional PDFs to Merge:</label>
                        <input type="file" id="merge-files" accept=".pdf" multiple class="form-control">
                    </div>
                </div>
                
                <div id="split-options" style="display: none;">
                    <div class="form-group">
                        <label for="split-range">Pages to Extract (e.g., 1-3,5,7-9):</label>
                        <input type="text" id="split-range" class="form-control" placeholder="Enter page range">
                    </div>
                </div>
                
                <div id="rotate-options" style="display: none;">
                    <div class="form-group">
                        <label for="rotate-pages">Pages to Rotate (e.g., 1,3-5):</label>
                        <input type="text" id="rotate-pages" class="form-control" placeholder="Enter page numbers">
                    </div>
                    <div class="form-group">
                        <label for="rotate-degree">Rotation Degree:</label>
                        <select id="rotate-degree" class="form-control">
                            <option value="90">90° Clockwise</option>
                            <option value="180">180°</option>
                            <option value="270">90° Counter-Clockwise</option>
                        </select>
                    </div>
                </div>
                
                <div id="protect-options" style="display: none;">
                    <div class="form-group">
                        <label for="pdf-password">Set Password:</label>
                        <input type="password" id="pdf-password" class="form-control" placeholder="Enter password">
                    </div>
                </div>
                
                <div class="progress-container" id="pdf-editor-progress">
                    <div class="progress-bar" id="pdf-editor-progress-bar"></div>
                </div>
                
                <div class="status-message" id="pdf-editor-status"></div>
                
                <div class="file-info" id="pdf-editor-info"></div>
                
                <div class="action-buttons">
                    <button class="btn" id="edit-pdf-btn" onclick="editPDF()"><i class="fas fa-edit"></i> Process PDF</button>
                    <button class="btn btn-outline" id="download-edited-pdf-btn" onclick="downloadEditedPDF()" disabled><i class="fas fa-download"></i> Download</button>
                </div>
            </div>
        </div>

        <div class="ad-banner">
            <!-- Ad placeholder -->
            Advertisement Space
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-column">
                <h3>MediaTool Pro</h3>
                <p>Your all-in-one solution for image and PDF conversion, compression, and editing needs.</p>
            </div>
            <div class="footer-column">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="#image-compressor">Image Compressor</a></li>
                    <li><a href="#image-converter">Image Converter</a></li>
                    <li><a href="#pdf-converter">PDF Converter</a></li>
                    <li><a href="#pdf-editor">PDF Editor</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Resources</h3>
                <ul>
                    <li><a href="#">How to Compress Images</a></li>
                    <li><a href="#">Best Image Formats</a></li>
                    <li><a href="#">PDF Optimization Tips</a></li>
                    <li><a href="#">FAQ</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Company</h3>
                <ul>
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Contact</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Terms of Service</a></li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; 2023 MediaTool Pro. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Global variables
        let currentTool = null;
        let originalFile = null;
        let processedFile = null;
        let pdfDoc = null;
        let additionalPdfs = [];

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Hide all tool sections initially
            document.querySelectorAll('.tool-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Set up event listeners for navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = this.getAttribute('href');
                    if (target === '#') {
                        // If it's just #, hide any open tool and show main view
                        document.querySelectorAll('.tool-section').forEach(section => {
                            section.classList.remove('active');
                        });
                        currentTool = null;
                        window.scrollTo(0, 0);
                    } else if (target.startsWith('#')) {
                        // Handle internal links
                        const section = document.querySelector(target);
                        if (section) {
                            // Hide any open tool first
                            document.querySelectorAll('.tool-section').forEach(section => {
                                section.classList.remove('active');
                            });
                            currentTool = null;
                            
                            // Scroll to the section
                            section.scrollIntoView({ behavior: 'smooth' });
                        }
                    }
                });
            });
            
            // Initialize tool options
            updateCompressionValue();
            updateQualityValue();
        });

        // Tool navigation functions
        function showTool(toolId) {
            // Hide all tool sections
            document.querySelectorAll('.tool-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show the selected tool
            document.getElementById(toolId).classList.add('active');
            currentTool = toolId;
            window.scrollTo(0, 0);
        }

        function hideTool(toolId) {
            document.getElementById(toolId).classList.remove('active');
            currentTool = null;
            resetTool(toolId);
            
            // Scroll back to top
            window.scrollTo(0, 0);
        }

        function resetTool(toolId) {
            // Reset file inputs
            const fileInput = document.getElementById(`${toolId}-input`);
            if (fileInput) fileInput.value = '';
            
            // Hide settings panel
            const settingsPanel = document.getElementById(`${toolId}-settings`);
            if (settingsPanel) settingsPanel.style.display = 'none';
            
            // Reset previews
            const previewImg = document.getElementById(`${toolId}-preview`);
            if (previewImg) previewImg.src = '';
            
            // Reset file info
            const fileInfo = document.getElementById(`${toolId}-info`);
            if (fileInfo) fileInfo.innerHTML = '';
            
            // Reset progress bars
            const progressBar = document.getElementById(`${toolId}-progress-bar`);
            if (progressBar) progressBar.style.width = '0%';
            
            const progressContainer = document.getElementById(`${toolId}-progress`);
            if (progressContainer) progressContainer.style.display = 'none';
            
            // Reset status messages
            const statusMessage = document.getElementById(`${toolId}-status`);
            if (statusMessage) {
                statusMessage.style.display = 'none';
                statusMessage.className = 'status-message';
                statusMessage.textContent = '';
            }
            
            // Reset download buttons
            const downloadBtn = document.getElementById(`download-${toolId.split('-').join('-')}-btn`);
            if (downloadBtn) downloadBtn.disabled = true;
            
            // Reset global variables
            originalFile = null;
            processedFile = null;
            pdfDoc = null;
            additionalPdfs = [];
        }

        // File handling functions
        function handleDragOver(e) {
            e.preventDefault();
            e.stopPropagation();
            e.dataTransfer.dropEffect = 'copy';
            e.currentTarget.style.borderColor = '#4285f4';
            e.currentTarget.style.backgroundColor = '#f8faff';
        }

        function handleDragLeave(e) {
            e.preventDefault();
            e.stopPropagation();
            e.currentTarget.style.borderColor = '#ccc';
            e.currentTarget.style.backgroundColor = 'transparent';
        }

        function handleDrop(e, toolType) {
            e.preventDefault();
            e.stopPropagation();
            e.currentTarget.style.borderColor = '#ccc';
            e.currentTarget.style.backgroundColor = 'transparent';
            
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFileSelect(files, toolType);
            }
        }

        function handleFileSelect(files, toolType) {
            if (files.length === 0) return;
            
            originalFile = files[0];
            const fileType = originalFile.type;
            const fileName = originalFile.name;
            const fileSize = formatFileSize(originalFile.size);
            
            // Show settings panel
            document.getElementById(`${toolType}-settings`).style.display = 'block';
            
            // Update file info
            const fileInfoElement = document.getElementById(`${toolType}-info`);
            if (fileInfoElement) {
                fileInfoElement.innerHTML = `
                    <p><strong>File Name:</strong> ${fileName}</p>
                    <p><strong>File Type:</strong> ${fileType || 'Unknown'}</p>
                    <p><strong>File Size:</strong> ${fileSize}</p>
                `;
            }
            
            // Handle preview based on tool type
            if (toolType === 'compressor' || toolType === 'converter') {
                handleImagePreview(originalFile, toolType);
            } else if (toolType === 'pdf-converter' || toolType === 'pdf-editor') {
                handlePDFPreview(originalFile, toolType);
            }
            
            // Show action-specific options
            if (toolType === 'pdf-editor') {
                showEditorOptions();
            }
            
            // Enable process button
            const processBtn = document.getElementById(`${toolType.split('-').join('-')}-btn`);
            if (processBtn) processBtn.disabled = false;
        }

        function handleImagePreview(file, toolType) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const previewId = toolType === 'compressor' ? 'original-preview' : 'original-converter-preview';
                document.getElementById(previewId).src = e.target.result;
                
                const fileInfoId = toolType === 'compressor' ? 'original-info' : 'original-converter-info';
                document.getElementById(fileInfoId).innerHTML = `
                    <p><strong>Dimensions:</strong> Loading...</p>
                `;
                
                // Get image dimensions
                const img = new Image();
                img.onload = function() {
                    document.getElementById(fileInfoId).innerHTML += `
                        <p><strong>Dimensions:</strong> ${img.width} × ${img.height} pixels</p>
                    `;
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function handlePDFPreview(file, toolType) {
            const reader = new FileReader();
            reader.onload = function(e) {
                // For demo purposes, we'll just show a generic PDF icon
                const previewElement = document.getElementById(`${toolType}-preview`);
                if (previewElement) {
                    previewElement.src = 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="200" viewBox="0 0 200 200"><rect width="200" height="200" fill="#f0f0f0"/><text x="100" y="100" font-family="Arial" font-size="16" text-anchor="middle" fill="#666">PDF Preview</text></svg>';
                }
                
                // In a real implementation, you would use PDF.js to render the first page
            };
            reader.readAsDataURL(file);
        }

        function showEditorOptions() {
            const action = document.getElementById('editor-action').value;
            
            // Hide all options first
            document.getElementById('merge-options').style.display = 'none';
            document.getElementById('split-options').style.display = 'none';
            document.getElementById('rotate-options').style.display = 'none';
            document.getElementById('protect-options').style.display = 'none';
            
            // Show relevant options
            if (action === 'merge') {
                document.getElementById('merge-options').style.display = 'block';
                // Handle merge files selection
                document.getElementById('merge-files').addEventListener('change', function(e) {
                    additionalPdfs = Array.from(e.target.files);
                });
            } else if (action === 'split') {
                document.getElementById('split-options').style.display = 'block';
            } else if (action === 'rotate') {
                document.getElementById('rotate-options').style.display = 'block';
            } else if (action === 'protect') {
                document.getElementById('protect-options').style.display = 'block';
            }
        }

        // Compression and conversion functions
        function updateCompressionValue() {
            document.getElementById('compression-value').textContent = 
                document.getElementById('compression-level').value;
        }

        function updateQualityValue() {
            document.getElementById('quality-value').textContent = 
                document.getElementById('quality-level').value;
        }

        function compressImage() {
            if (!originalFile) return;
            
            const compressionLevel = document.getElementById('compression-level').value / 100;
            const outputFormat = document.getElementById('output-format').value;
            
            // Show progress bar
            const progressContainer = document.getElementById('compressor-progress');
            const progressBar = document.getElementById('compressor-progress-bar');
            const statusMessage = document.getElementById('compressor-status');
            
            progressContainer.style.display = 'block';
            statusMessage.style.display = 'none';
            
            // Disable button during processing
            document.getElementById('compress-btn').disabled = true;
            
            // Simulate progress (in a real app, this would be actual compression progress)
            let progress = 0;
            const progressInterval = setInterval(() => {
                progress += 5;
                progressBar.style.width = `${progress}%`;
                
                if (progress >= 100) {
                    clearInterval(progressInterval);
                    performImageCompression(originalFile, compressionLevel, outputFormat);
                }
            }, 100);
        }

        function performImageCompression(file, quality, format) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    
                    // Calculate new dimensions (optional: you could add resizing)
                    canvas.width = img.width;
                    canvas.height = img.height;
                    
                    // Draw image on canvas
                    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                    
                    // Determine output format
                    let mimeType = 'image/jpeg';
                    if (format === 'original') {
                        mimeType = file.type || 'image/jpeg';
                    } else if (format === 'png') {
                        mimeType = 'image/png';
                    } else if (format === 'webp') {
                        mimeType = 'image/webp';
                    }
                    
                    // Convert to blob with quality
                    canvas.toBlob(function(blob) {
                        processedFile = new File([blob], file.name.replace(/\.[^/.]+$/, '') + '.' + mimeType.split('/')[1], {
                            type: mimeType
                        });
                        
                        // Update preview
                        const compressedPreview = document.getElementById('compressed-preview');
                        compressedPreview.src = URL.createObjectURL(blob);
                        
                        // Update file info
                        const originalSize = file.size;
                        const compressedSize = blob.size;
                        
                        document.getElementById('compressed-info').innerHTML = `
                            <p><strong>Compressed Size:</strong> ${formatFileSize(compressedSize)}</p>
                            <p><strong>Reduction:</strong> ${Math.round((1 - compressedSize/originalSize) * 100)}%</p>
                            <p><strong>Format:</strong> ${mimeType.split('/')[1].toUpperCase()}</p>
                            <p><strong>Dimensions:</strong> ${img.width} × ${img.height} pixels</p>
                        `;
                        
                        // Enable download button
                        document.getElementById('download-compressed-btn').disabled = false;
                        
                        // Show success message
                        statusMessage.textContent = 'Image compressed successfully!';
                        statusMessage.className = 'status-message status-success';
                        statusMessage.style.display = 'block';
                        
                        // Re-enable button
                        document.getElementById('compress-btn').disabled = false;
                        
                    }, mimeType, quality);
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function convertImage() {
            if (!originalFile) return;
            
            const targetFormat = document.getElementById('target-format').value;
            const quality = document.getElementById('quality-level').value / 100;
            
            // Show progress bar
            const progressContainer = document.getElementById('converter-progress');
            const progressBar = document.getElementById('converter-progress-bar');
            const statusMessage = document.getElementById('converter-status');
            
            progressContainer.style.display = 'block';
            statusMessage.style.display = 'none';
            
            // Disable button during processing
            document.getElementById('convert-btn').disabled = true;
            
            // Simulate progress (in a real app, this would be actual conversion progress)
            let progress = 0;
            const progressInterval = setInterval(() => {
                progress += 5;
                progressBar.style.width = `${progress}%`;
                
                if (progress >= 100) {
                    clearInterval(progressInterval);
                    performImageConversion(originalFile, targetFormat, quality);
                }
            }, 100);
        }

        function performImageConversion(file, format, quality) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    
                    // Calculate new dimensions (optional: you could add resizing)
                    canvas.width = img.width;
                    canvas.height = img.height;
                    
                    // Draw image on canvas
                    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                    
                    // Determine output format
                    let mimeType = 'image/jpeg';
                    if (format === 'png') {
                        mimeType = 'image/png';
                    } else if (format === 'webp') {
                        mimeType = 'image/webp';
                    } else if (format === 'gif') {
                        mimeType = 'image/gif';
                    } else if (format === 'bmp') {
                        mimeType = 'image/bmp';
                    }
                    
                    // Convert to blob with quality
                    canvas.toBlob(function(blob) {
                        processedFile = new File([blob], file.name.replace(/\.[^/.]+$/, '') + '.' + format, {
                            type: mimeType
                        });
                        
                        // Update preview
                        const convertedPreview = document.getElementById('converted-preview');
                        convertedPreview.src = URL.createObjectURL(blob);
                        
                        // Update file info
                        const originalSize = file.size;
                        const convertedSize = blob.size;
                        
                        document.getElementById('converted-info').innerHTML = `
                            <p><strong>Converted Size:</strong> ${formatFileSize(convertedSize)}</p>
                            <p><strong>Format:</strong> ${format.toUpperCase()}</p>
                            <p><strong>Dimensions:</strong> ${img.width} × ${img.height} pixels</p>
                        `;
                        
                        // Enable download button
                        document.getElementById('download-converted-btn').disabled = false;
                        
                        // Show success message
                        statusMessage.textContent = 'Image converted successfully!';
                        statusMessage.className = 'status-message status-success';
                        statusMessage.style.display = 'block';
                        
                        // Re-enable button
                        document.getElementById('convert-btn').disabled = false;
                        
                    }, mimeType, format === 'png' ? undefined : quality);
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        async function convertPDF() {
            if (!originalFile) return;
            
            const conversionType = document.getElementById('pdf-conversion-type').value;
            
            // Show progress bar
            const progressContainer = document.getElementById('pdf-converter-progress');
            const progressBar = document.getElementById('pdf-converter-progress-bar');
            const statusMessage = document.getElementById('pdf-converter-status');
            
            progressContainer.style.display = 'block';
            statusMessage.style.display = 'none';
            
            // Disable button during processing
            document.getElementById('convert-pdf-btn').disabled = true;
            
            try {
                // Simulate progress (in a real app, this would be actual conversion progress)
                let progress = 0;
                const progressInterval = setInterval(() => {
                    progress += 5;
                    progressBar.style.width = `${progress}%`;
                    
                    if (progress >= 100) {
                        clearInterval(progressInterval);
                        
                        // Simulate conversion (in a real app, you would use a PDF library)
                        setTimeout(() => {
                            // For demo purposes, we'll just create a dummy file
                            let resultMessage = '';
                            let outputFilename = originalFile.name.replace(/\.[^/.]+$/, '');
                            let outputMimeType = 'application/pdf';
                            
                            if (conversionType === 'pdf-to-word') {
                                resultMessage = 'PDF converted to Word document';
                                outputFilename += '.docx';
                                outputMimeType = 'application/vnd.openxmlformats-officedocument.wordprocessingml.document';
                            } else if (conversionType === 'pdf-to-excel') {
                                resultMessage = 'PDF converted to Excel spreadsheet';
                                outputFilename += '.xlsx';
                                outputMimeType = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';
                            } else if (conversionType === 'pdf-to-jpg') {
                                resultMessage = 'PDF pages converted to JPG images (ZIP file)';
                                outputFilename += '.zip';
                                outputMimeType = 'application/zip';
                            } else if (conversionType === 'word-to-pdf') {
                                resultMessage = 'Word document converted to PDF';
                                outputFilename += '.pdf';
                            } else if (conversionType === 'excel-to-pdf') {
                                resultMessage = 'Excel spreadsheet converted to PDF';
                                outputFilename += '.pdf';
                            } else if (conversionType === 'image-to-pdf') {
                                resultMessage = 'Image converted to PDF document';
                                outputFilename += '.pdf';
                            }
                            
                            // Create a dummy file for download
                            processedFile = new File([originalFile], outputFilename, {
                                type: outputMimeType
                            });
                            
                            // Update status
                            document.getElementById('pdf-converter-info').innerHTML += `
                                <p><strong>Result:</strong> ${resultMessage}</p>
                            `;
                            
                            // Enable download button
                            document.getElementById('download-converted-pdf-btn').disabled = false;
                            
                            // Show success message
                            statusMessage.textContent = 'Conversion completed successfully!';
                            statusMessage.className = 'status-message status-success';
                            statusMessage.style.display = 'block';
                            
                            // Re-enable button
                            document.getElementById('convert-pdf-btn').disabled = false;
                        }, 500);
                    }
                }, 100);
            } catch (error) {
                statusMessage.textContent = 'Error during conversion: ' + error.message;
                statusMessage.className = 'status-message status-error';
                statusMessage.style.display = 'block';
                document.getElementById('convert-pdf-btn').disabled = false;
            }
        }

        async function editPDF() {
            if (!originalFile) return;
            
            const action = document.getElementById('editor-action').value;
            
            // Show progress bar
            const progressContainer = document.getElementById('pdf-editor-progress');
            const progressBar = document.getElementById('pdf-editor-progress-bar');
            const statusMessage = document.getElementById('pdf-editor-status');
            
            progressContainer.style.display = 'block';
            statusMessage.style.display = 'none';
            
            // Disable button during processing
            document.getElementById('edit-pdf-btn').disabled = true;
            
            try {
                // Simulate progress (in a real app, this would be actual editing progress)
                let progress = 0;
                const progressInterval = setInterval(() => {
                    progress += 5;
                    progressBar.style.width = `${progress}%`;
                    
                    if (progress >= 100) {
                        clearInterval(progressInterval);
                        
                        // Simulate PDF editing (in a real app, you would use PDF-lib or similar)
                        setTimeout(async () => {
                            let resultMessage = '';
                            let outputFilename = originalFile.name.replace(/\.[^/.]+$/, '') + '_edited.pdf';
                            
                            if (action === 'compress') {
                                resultMessage = 'PDF compressed successfully';
                            } else if (action === 'merge') {
                                resultMessage = 'PDFs merged successfully';
                                outputFilename = 'merged.pdf';
                            } else if (action === 'split') {
                                const pages = document.getElementById('split-range').value;
                                resultMessage = `PDF split according to pages: ${pages}`;
                                outputFilename = 'split.pdf';
                            } else if (action === 'rotate') {
                                const pages = document.getElementById('rotate-pages').value;
                                const degrees = document.getElementById('rotate-degree').value;
                                resultMessage = `Pages ${pages} rotated by ${degrees} degrees`;
                            } else if (action === 'protect') {
                                const password = document.getElementById('pdf-password').value;
                                resultMessage = 'PDF protected with password';
                            } else if (action === 'unlock') {
                                resultMessage = 'PDF password removed';
                            }
                            
                            // Create a dummy file for download
                            processedFile = new File([originalFile], outputFilename, {
                                type: 'application/pdf'
                            });
                            
                            // Update status
                            document.getElementById('pdf-editor-info').innerHTML += `
                                <p><strong>Result:</strong> ${resultMessage}</p>
                            `;
                            
                            // Enable download button
                            document.getElementById('download-edited-pdf-btn').disabled = false;
                            
                            // Show success message
                            statusMessage.textContent = 'PDF processed successfully!';
                            statusMessage.className = 'status-message status-success';
                            statusMessage.style.display = 'block';
                            
                            // Re-enable button
                            document.getElementById('edit-pdf-btn').disabled = false;
                        }, 500);
                    }
                }, 100);
            } catch (error) {
                statusMessage.textContent = 'Error during PDF editing: ' + error.message;
                statusMessage.className = 'status-message status-error';
                statusMessage.style.display = 'block';
                document.getElementById('edit-pdf-btn').disabled = false;
            }
        }

        // Download functions
        function downloadCompressedImage() {
            if (!processedFile) {
                showError('compressor-status', 'Please compress an image first');
                return;
            }
            downloadFile(processedFile);
        }

        function downloadConvertedImage() {
            if (!processedFile) {
                showError('converter-status', 'Please convert an image first');
                return;
            }
            downloadFile(processedFile);
        }

        function downloadConvertedPDF() {
            if (!processedFile) {
                showError('pdf-converter-status', 'Please convert a file first');
                return;
            }
            downloadFile(processedFile);
        }

        function downloadEditedPDF() {
            if (!processedFile) {
                showError('pdf-editor-status', 'Please edit a PDF first');
                return;
            }
            downloadFile(processedFile);
        }

        function downloadFile(file) {
            const url = URL.createObjectURL(file);
            const a = document.createElement('a');
            a.href = url;
            a.download = file.name;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Helper functions
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function showError(elementId, message) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = 'status-message status-error';
            element.style.display = 'block';
        }
    </script>
</body>
</html>